# 금일 업무

## 실시업무

1. **스테레오 비전 시스템 개발**
   * 멀티프로세싱 기반 고성능 카메라 캡처 시스템 구축
     * 두 대의 USB 카메라를 독립 프로세스에서 캡처하는 Producer 시스템 구현
     * 프로세스 간 독립성 보장 및 안정성 확보
   * 공유 메모리 원형 버퍼(SharedRingBuffer) 구현
     * Zero-copy 지향 이미지 데이터 공유 메커니즘 구축
     * 세마포어 및 락을 활용한 동기화 로직 구현
     * 타임스탬프 및 프레임 번호 메타데이터 저장 기능 추가
   * 스테레오 뷰어(Consumer) 시스템 개발
     * 실시간 좌우 카메라 영상 결합 및 표시 기능 구현
     * FPS 측정 및 동기화 오차 실시간 모니터링 기능 추가
     * CPU 사용량 모니터링 스레드 구현
   * 카메라 자동 재연결 로직 구현
     * 연결 끊김 감지 및 자동 재연결 메커니즘 구현
     * 재연결 간격 설정 기능 추가

2. **스테레오 캘리브레이션 시스템 개발**
   * 체스보드 패턴 기반 캘리브레이션 시스템 구현
     * Intrinsic 캘리브레이션 (개별 카메라 내부 파라미터 계산)
     * Extrinsic 캘리브레이션 (카메라 간 상대 위치/자세 계산)
     * 통합 캘리브레이션 모드 지원
   * 실시간 캘리브레이션 이미지 캡처 기능 구현
     * 체스보드 패턴 실시간 감지 및 표시
     * 동적 체스보드 크기 조절 기능 (화살표 키/WASD)
     * 타임스탬프 기반 이미지 파일 자동 저장
   * 스테레오 Rectification (이미지 정류) 기능 구현
     * 캘리브레이션 결과 기반 Remap 테이블 생성
     * 실시간 이미지 왜곡 보정 및 평행 정렬 처리
     * 수평선 그리드를 통한 정류 결과 시각화

3. **시간 동기화(Temporal Synchronization) 시스템 개발**
   * MediaPipe 포즈 추정 기반 동기화 알고리즘 구현
     * 손목 Y좌표 추출 및 시계열 데이터 수집
     * Gaussian Smoothing을 통한 노이즈 제거
     * 속도(Velocity) 변환 및 Z-score 정규화 처리
     * Cross-Correlation을 이용한 시간 오차(Lag) 계산
   * 제스처 기반 동기화 프로세스 구현
     * State Machine 기반 동기화 상태 관리 (IDLE, WAITING_FOR_GESTURE, COUNTDOWN, BUFFERING, CALCULATING, SYNCED, FAILED)
     * 오른손 들기 제스처 자동 감지 기능
     * 카운트다운 및 데이터 수집 단계별 UI 가이드 구현
   * 동기화 결과 시각화 기능 구현
     * 두 카메라 신호 그래프 실시간 표시
     * 상관계수 및 시간 오차(Offset) 정보 표시
     * 동기화 성공/실패 상태 피드백 제공

4. **포즈 추정 시스템 개발**
   * MediaPipe 기반 포즈 추정 모듈 구현
     * 별도 프로세스에서 실행하여 메인 뷰어 성능 영향 최소화
     * 랜드마크 데이터 직렬화 및 프로세스 간 전달 최적화
   * 포즈 추론 결과 큐 시스템 구현
     * Non-blocking 큐를 통한 최신 결과만 유지하는 메커니즘
     * 랜드마크 스켈레톤 실시간 그리기 기능
   * 제스처 감지 기능 구현
     * 오른손 손목이 코보다 위에 있는지 판단하는 로직 구현
     * 동기화 프로세스 트리거용 제스처 인식 기능

5. **성능 최적화 및 안정성 개선**
   * 셔터 랙 최소화를 위한 버퍼 크기 설정
     * CAP_PROP_BUFFERSIZE=1 설정으로 최신 프레임만 유지
   * 공유 메모리 매핑 재설정 로직 구현
     * Windows multiprocessing spawn 방식 대응
   * 프로세스 종료 시 정리 로직 구현
     * atexit 및 시그널 핸들러를 통한 좀비 프로세스 방지
     * 프로세스 강제 종료 및 타임아웃 처리 로직 추가
   * 비디오 녹화 기능 구현
     * OpenCV VideoWriter를 이용한 실시간 녹화 기능
     * 녹화 시작/중지 토글 기능

6. **카메라 설정 및 관리 시스템**
   * YAML 기반 설정 파일 시스템 구현
     * 카메라별 해상도, FPS, 노출, 화이트밸런스 등 설정 관리
     * 로깅 설정 및 포즈 추정 설정 관리
   * 대화형 카메라 선택 기능 구현
     * 사용 가능한 카메라 목록 자동 감지 및 표시
     * 카메라 정보(이름, 백엔드, 해상도, FPS) 표시
     * 중복 선택 방지 로직 구현
   * 카메라 해상도 동기화 기능 구현
     * 두 카메라의 해상도 자동 확인 및 통일
     * 해상도 불일치 시 경고 및 자동 조정

7. **로깅 및 모니터링 시스템**
   * 구조화된 로깅 시스템 구현
     * 파일 및 콘솔 출력 지원
     * FPS, 동기화 오차, 지연시간 등 성능 메트릭 로깅
   * 실시간 성능 모니터링
     * 각 카메라별 FPS 측정 및 표시
     * 평균 동기화 오차 계산 및 표시
     * CPU 사용률 모니터링 및 표시

8. **프로젝트 구조 및 개발 환경 구축**
   * 모듈화된 프로젝트 구조 설계
     * core/ (핵심 기능 모듈)
     * calibration/ (캘리브레이션 모듈)
     * model/ (포즈 추정 모델)
     * utils/ (유틸리티 함수)
     * tests/ (단위 테스트)
   * 의존성 관리 및 requirements.txt 작성
     * OpenCV, MediaPipe, NumPy, SciPy 등 필수 라이브러리 정의
     * GPU 가속 라이브러리 (ONNX Runtime GPU) 포함
   * README 문서 작성
     * 프로젝트 개요 및 사용법 문서화
     * 스테레오 비전 시스템 상세 가이드 작성

9. **테스트 및 검증**
   * 카메라 연결 테스트 스크립트 작성
   * GPU 환경 확인 스크립트 작성
   * Queue 성능 테스트 구현
   * 저조도 환경 테스트 구현
   * 로깅 시스템 테스트 구현

10. **사용자 인터페이스 및 키보드 단축키 구현**
    * 실시간 영상 표시 및 정보 오버레이
    * 키보드 단축키 기능 구현
      * 'q': 프로그램 종료
      * 'c': 캘리브레이션 모드 토글
      * 'r': Rectification 모드 토글
      * 'v': 비디오 녹화 토글
      * 's': 시간 동기화 시작
      * 'SPACE': 캘리브레이션 이미지 캡처 / 동기화 수동 트리거
      * 화살표 키/WASD: 체스보드 크기 조절
    * 동기화 상태별 UI 가이드 메시지 표시
    * 성능 정보 실시간 표시 (FPS, CPU, 동기화 오차 등)

